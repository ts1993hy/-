# 进程、线程和协程

## 进程

进程是一个具有独立功能的程序关于某个数据集合的一次运行活动。它可以申请和拥有系统资源，是一个活动的实体。它不只是程序的代码，还包括当前的活动，通过`程序计数器`的值和`处理寄存器`的内容来表示。

进程的概念主要有两点：第一，进程是一个实体。每一个进程都有它自己的地址空间，一般情况下，包括文本区域、数据区域和堆栈。

1. 文本区域存储处理器执行的代码；
1. 数据区域存储变量和进程执行期间使用的动态内存的分配；
1. 堆栈区域存储着活动过程调用的指令和本地变量。

## 线程

一个标准的线程由线程ID，当前指令指针，寄存器集合和堆栈组成。另外，线程是进程中的一个实体，是被系统独立调度和分派的基本单位，线程自己不拥有系统资源，只拥有一点儿在运行中必不可少的资源，但它可与同属于一个进程的其他线程共享进程所拥有的全部资源。线程拥有`就绪`、`运行`、`阻塞`三种基本状态。

## 协程

协程，又称微线程、纤程。

协程的执行类似于子程序的执行，但是在执行过程中，可以在子程序内部中断，然后转而自行别的子程序，在适当的时候再返回来接着执行。

> 协程的优势在于协程的执行是由程序自身控制，没有线程切换的开销，和多线程比，线程数量越多，协程的性能优势越明显。并且协程不需要多线程的锁机制，因为只有一个线程，也不存在写变量冲突，在协程中控制共享资源不加锁，只需要判断状态就好了，所以执行效率比多线程高很多。

最后套用Donald Knuth的一句话总结协程的特点：

`子程序就是协程的一种特例。`